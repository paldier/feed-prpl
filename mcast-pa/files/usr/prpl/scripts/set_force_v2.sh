#!/bin/bash
###############################################################################
#               _____                      _  ______ _____                    #
#              /  ___|                    | | | ___ \  __ \                   #
#              \ `--. _ __ ___   __ _ _ __| |_| |_/ / |  \/                   #
#               `--. \ '_ ` _ \ / _` | '__| __|    /| | __                    #
#              /\__/ / | | | | | (_| | |  | |_| |\ \| |_\ \                   #
#              \____/|_| |_| |_|\__,_|_|   \__\_| \_|\____/ Inc.              #
#                                                                             #
###############################################################################
#                                                                             #
#                       copyright 2018 by SmartRG, Inc.                       #
#                              Santa Barbara, CA                              #
#                                                                             #
###############################################################################
#                                                                             #
# Author: Colin Whittaker                                                     #
#                                                                             #
# Purpose: Set IGMP force V2                                                  #
#                                                                             #
###############################################################################

force=$(uci get iptv.@igmp[0].force_v2)

if [ "$force" = "" ]; then
	force=0
fi
# force V2 only.
if [ $force -ne 0 ]; then
	force=2
fi

echo $force > /proc/sys/net/ipv4/conf/all/force_igmp_version
